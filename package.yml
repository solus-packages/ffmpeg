name       : ffmpeg
homepage   : https://www.ffmpeg.org/
version    : 4.2.1
release    : 74
source     :
    - https://ffmpeg.org/releases/ffmpeg-4.2.1.tar.xz : cec7c87e9b60d174509e263ac4011b522385fd0775292e1670ecc1180c9bb6d4
license    :
    - GPL-3.0-or-later
    - LGPL-3.0-or-later
component  : multimedia.codecs
summary    : A complete, cross-platform solution to record, convert and stream audio
    and video
description: |
    FFmpeg is a multimedia framework, able to decode, encode, transcode, mux, demux, stream, filter and play several formats that humans and machines have created.
builddeps  :
    - pkgconfig(alsa)
    - pkgconfig(aom)
    - pkgconfig(caca)
    - pkgconfig(dav1d)
    - pkgconfig(fdk-aac)
    - pkgconfig(ffnvcodec)
    - pkgconfig(fontconfig)
    - pkgconfig(freetype2)
    - pkgconfig(fribidi)
    - pkgconfig(gl)
    - pkgconfig(libaacs)
    - pkgconfig(libass)
    - pkgconfig(libbluray)
    - pkgconfig(libcdio_paranoia)
    - pkgconfig(libdrm)
    - pkgconfig(libopenjp2)
    - pkgconfig(libpulse)
    - pkgconfig(libssh)
    - pkgconfig(libv4l2)
    - pkgconfig(libva)
    - pkgconfig(libwebp)
    - pkgconfig(ogg)
    - pkgconfig(openal)
    - pkgconfig(openssl)
    - pkgconfig(opus)
    - pkgconfig(sdl2)
    - pkgconfig(speex)
    - pkgconfig(theora)
    - pkgconfig(twolame)
    - pkgconfig(vdpau)
    - pkgconfig(vorbis)
    - pkgconfig(vpx)
    - pkgconfig(x264)
    - pkgconfig(x265)
    - pkgconfig(xv)
    - pkgconfig(zimg)
    - bzip2-devel
    - lame-devel
    - libgcrypt-devel
    - snappy-devel
    - xvidcore-devel
patterns   :
    - devel : [/usr/share/man/man3*]
setup      : |
    %patch -p1 < $pkgfiles/make-libdav1d-the-preferred-AV1-decoder.patch

    ./configure --prefix=/usr \
        --libdir=%libdir% \
        --disable-debug \
        --disable-stripping \
        --enable-shared \
        --disable-static \
        --enable-avisynth \
        --enable-avresample \
        --enable-gcrypt \
        --enable-gpl \
        --enable-libaom \
        --enable-libass \
        --enable-libbluray \
        --enable-libcaca \
        --enable-libcdio \
        --enable-libdav1d \
        --enable-libdrm \
        --enable-libfdk-aac \
        --enable-libfontconfig \
        --enable-libfreetype \
        --enable-libfribidi \
        --enable-libmp3lame \
        --enable-libopus \
        --enable-libpulse \
        --enable-libsnappy \
        --enable-libspeex \
        --enable-libssh \
        --enable-libtheora \
        --enable-libtwolame \
        --enable-libv4l2 \
        --enable-libvorbis \
        --enable-libvpx \
        --enable-libwebp \
        --enable-libx264 \
        --enable-libx265 \
        --enable-libxvid \
        --enable-libzimg \
        --enable-nonfree \
        --enable-nvdec \
        --enable-nvenc \
        --enable-openal \
        --enable-opengl \
        --enable-openssl \
        --enable-sdl2 \
        --enable-version3
build      : |
    %make
install    : |
    %make_install
